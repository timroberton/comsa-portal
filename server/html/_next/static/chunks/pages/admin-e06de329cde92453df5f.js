(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{5876:function(e,n,t){"use strict";t.d(n,{L:function(){return u}});var r=t(5893),a=t(3384),i=t(1664),s=t(8080),c=t(1737),o=t(7294),l=t(2067),u=function(e){var n=e.children,t=e.page,u=e.title,d=e.buttons,m=e.uu,f=(0,o.useState)(!1),h=f[0],x=f[1];return(0,r.jsxs)(c.i,{uu:m,children:[(0,r.jsxs)("div",{className:"flex flex-col w-full h-full bg-gray-200 select-none",children:[(0,r.jsx)("nav",{className:"flex-none w-full overflow-y-scroll bg-gray-800 hide-functional-scrollbar",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 xl:px-8 mx-auto max-w-[1500px]",children:[(0,r.jsx)("div",{className:"flex-shrink-0 text-xl font-semibold leading-none tracking-wide text-white",children:"Analysis Portal"}),(0,r.jsxs)("div",{className:"flex items-baseline ml-10",children:[(0,r.jsx)(i.default,{href:"/",children:(0,r.jsx)("a",{className:"px-3 py-2 cursor-pointer text-sm font-medium ".concat("analyses"==t?"text-white bg-gray-900":"text-gray-300 hover:text-white hover:bg-gray-700"," focus:outline-none "),children:"Analyses"})}),(0,r.jsx)(i.default,{href:"/data",children:(0,r.jsx)("a",{className:"ml-4 px-3 py-2 cursor-pointer text-sm font-medium ".concat("data"==t?"text-white bg-gray-900":"text-gray-300 hover:text-white hover:bg-gray-700"," focus:outline-none "),children:"Data"})}),m.loginState===s.z.LoggedIn&&m.user.isAdmin&&(0,r.jsx)(i.default,{href:"/admin",children:(0,r.jsx)("a",{className:"ml-4 px-3 py-2 cursor-pointer text-sm font-medium ".concat("admin"==t?"text-white bg-gray-900":"text-gray-300 hover:text-white hover:bg-gray-700"," focus:outline-none "),children:"Admin"})})]}),(0,r.jsx)("div",{className:"flex-1"}),m.loginState===s.z.LoggedIn&&(0,r.jsxs)("div",{className:"flex group px-3 py-2 -mr-3 cursor-pointer text-sm font-medium text-blue-300 justify-end",children:[m.user.name,(0,r.jsxs)("div",{className:"absolute z-10 hidden -mr-3 text-right bg-gray-900 shadow-lg mt-7 w-36 group-hover:block",children:[(0,r.jsx)("div",{className:"px-4 py-2.5 text-sm font-medium text-white cursor-pointer hover:bg-gray-700 focus:outline-none",onClick:function(){return x(!0)},children:"Change password"}),(0,r.jsx)("div",{className:"px-4 py-2.5 text-sm font-medium text-white cursor-pointer hover:bg-gray-700 focus:outline-none",onClick:m.logout,children:"Logout"})]})]})]})}),(0,r.jsx)("header",{className:"flex-none w-full overflow-y-scroll bg-white border-b border-gray-200 hide-functional-scrollbar",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 xl:px-8 py-4 mx-auto max-w-[1500px]",children:[(0,r.jsx)("h2",{className:"flex-1 min-w-0 text-2xl font-semibold leading-6 text-gray-900 sm:text-2xl sm:leading-10 sm:truncate",children:u}),d.length>0&&(0,r.jsx)("div",{className:"flex mt-0 ml-4",children:d.map((function(e){return(0,r.jsx)(a.y3,{label:e.label,onClick:e.onClick||void 0,color:e.color||a.Wo.Blue,marginLeft:!0,icon:e.icon},e.label)}))})]})}),(0,r.jsx)("main",{className:"flex-1 w-full h-0 overflow-y-scroll",children:(0,r.jsx)("div",{className:"px-4 xl:px-8 py-6 mx-auto max-w-[1500px]",children:n})})]}),m.loginState===s.z.LoggedIn&&h&&(0,r.jsx)(l.u,{cancel:function(){return x(!1)},email:m.user.email,adminIsChangingPassword:!1})]})}},8212:function(e,n,t){"use strict";t.d(n,{u_:function(){return i},nK:function(){return s}});var r=t(5893),a=t(7294),i=function(e){var n=(0,a.useRef)(void 0),t=(0,a.useRef)(void 0);return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-auto text-svggray",style:{background:"rgba(0,0,0,0.6)"},onMouseDown:function(e){return n.current=e.target},onMouseUp:function(e){return t.current=e.target},onClick:function(r){n.current===t.current&&t.current===r.target&&e.cancel()},children:(0,r.jsx)("div",{className:"relative px-6 py-6 bg-white ui-form-rounded",style:{maxWidth:e.minWidth?void 0:600,width:e.minWidth},onClick:function(e){return e.stopPropagation()},children:e.children})})},s=function(e){return(0,r.jsx)("div",{className:"flex mt-4",children:e.children})}},2067:function(e,n,t){"use strict";t.d(n,{u:function(){return d}});var r=t(809),a=t.n(r),i=t(5893),s=t(2447),c=t(7294),o=t(2224),l=t(8212),u=t(3384),d=function(e){var n=(0,c.useState)(""),t=n[0],r=n[1],d=(0,c.useState)(!1),m=d[0],f=d[1];function h(){return(h=(0,s.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==t.trim()){n.next=3;break}return window.alert("You must enter a new password"),n.abrupt("return");case 3:return f(!0),n.next=6,(0,o.c0)(e.email,t);case 6:if("success"===n.sent){n.next=11;break}return window.alert("Could not reset password"),f(!1),n.abrupt("return");case 11:e.cancel();case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,i.jsx)(l.u_,{cancel:e.cancel,minWidth:600,children:m?(0,i.jsx)("div",{className:"",children:"Saving..."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"mb-3 text-xl font-bold",children:e.email}),(0,i.jsx)("div",{className:"ui-form-subheader",children:"New password"}),(0,i.jsx)(u.u3,{type:u.o3.password,value:t,onChange:r,autoFocus:!0}),e.adminIsChangingPassword&&(0,i.jsx)("div",{className:"mt-4 text-sm",children:"After you have saved this new password, you should contact the user, give them the new password you created, and ask them to login with this new password and change their password again themselves."}),(0,i.jsxs)(l.nK,{children:[(0,i.jsx)(u.y3,{label:"Save new password",onClick:function(){return h.apply(this,arguments)},color:u.Wo.Blue}),(0,i.jsx)(u.y3,{label:"Cancel",onClick:e.cancel,color:u.Wo.Gray,marginLeft:!0})]})]})})}},3384:function(e,n,t){"use strict";t.d(n,{Wo:function(){return r},qY:function(){return i},y3:function(){return u},_3:function(){return h},Cj:function(){return x},o3:function(){return f},u3:function(){return g},mA:function(){return p},$j:function(){return v}});var r,a,i,s=t(5893);function c(e){switch(e){case r.Blue:return"ui-btn-blue";case r.Green:return"ui-btn-green";case r.Red:return"ui-btn-red";case r.Orange:return"ui-btn-orange";case r.Gray:return"ui-btn-gray";case r.Purple:return"ui-btn-purple";case r.LightGray:return"ui-btn-lightgray";default:return c(r.LightGray)}}function o(e){switch(e){case a.Small:return"ui-btn-small";case a.Medium:return"ui-btn-medium";case a.Large:return"ui-btn-large";default:return o(a.Medium)}}function l(e){switch(e){case a.Small:return"-ml-0.5 mr-2 h-4 w-4";case a.Medium:return"-ml-1 mr-2 h-5 w-5";case a.Large:return"-ml-1 mr-3 h-5 w-5";default:return l(a.Medium)}}!function(e){e[e.Blue=0]="Blue",e[e.Green=1]="Green",e[e.Gray=2]="Gray",e[e.Red=3]="Red",e[e.Orange=4]="Orange",e[e.LightGray=5]="LightGray",e[e.Purple=6]="Purple"}(r||(r={})),function(e){e.Small="small",e.Medium="medium",e.Large="large"}(a||(a={})),function(e){e.Submit="submit"}(i||(i={}));var u=function(e){var n="".concat(e.disabled?"pointer-events-none":""," ").concat(o(e.size)," ").concat(c(e.color)," ").concat(e.marginLeft?"ui-margin-left":"ml-0"," ").concat(e.marginRight?"ui-margin-right":"mr-0").replace(/\s+/g," ").trim();return(0,s.jsx)("button",{className:n,type:e.type||"button",form:e.form,onClick:e.onClick,disabled:e.disabled,children:e.icon?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.icon,{className:l(e.size)})," ",e.label]}):e.label})};function d(e){switch(e){case a.Small:return"ui-iconbtn-small";case a.Medium:return"ui-iconbtn-medium";case a.Large:return"ui-iconbtn-large";default:return d(a.Medium)}}function m(e){switch(e){case a.Small:return"1rem";case a.Medium:return"1.25rem";case a.Large:return"1.5rem";default:return m(a.Medium)}}var f,h=function(e){var n="".concat(d(e.size)," ").concat(c(e.color)," ").concat(e.marginLeft?"ui-margin-left":"ml-0"," ").concat(e.marginRight?"ui-margin-right":"mr-0").replace(/\s+/g," ").trim();return(0,s.jsx)("button",{className:n,type:"button",onClick:e.onClick,children:(0,s.jsx)(e.icon,{className:"",style:{height:m(e.size),width:m(e.size)}})})},x=function(e){var n="".concat(e.purple?"ui-select-purple":"ui-select"," ").concat(e.marginLeft?"ui-margin-left":"ml-0"," ").concat(e.marginRight?"ui-margin-right":"mr-0");return(0,s.jsx)("select",{className:n,value:e.value,onChange:function(n){return e.onChange(n.target.value)},disabled:e.disabled,children:e.options.map((function(e){return(0,s.jsx)("option",{value:e.value,children:e.text},e.value)}))})};!function(e){e.text="text",e.email="email",e.password="password",e.number="number"}(f||(f={}));var g=function(e){var n="".concat(e.purple?"ui-input-purple":"ui-input"," ").concat(e.marginLeft?"ui-margin-left":"ml-0"," ").concat(e.marginRight?"ui-margin-right":"mr-0");return(0,s.jsx)("input",{className:n,type:e.type||f.text,value:e.value,onChange:function(n){return e.onChange(n.target.value)},autoFocus:e.autoFocus,disabled:e.disabled})},p=function(e){var n="".concat(e.inline?"inline-flex mr-6":"flex"," items-center align-bottom justify-start");return(0,s.jsxs)("div",{className:n,children:[(0,s.jsx)("input",{id:e.rootId,type:e.radio?"radio":"checkbox",className:e.radio?"ui-radio-icon":"ui-checkbox-icon",checked:e.checked,onChange:function(n){return e.onChange(n.target.checked)}}),(0,s.jsx)("label",{htmlFor:e.rootId,className:"ui-checkbox-label",children:e.label})]})},v=function(e){return(0,s.jsxs)("svg",{className:"inline-block ".concat(w(e.size)," animate-spin text-green-600"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})};function w(e){switch(e){case void 0:return"w-12 h-12";case 6:return"w-6 h-6";case 8:return"w-8 h-8";case 10:return"w-10 h-10";case 12:return"w-12 h-12";case 16:return"w-16 h-16";case 24:return"w-24 h-24";default:return"w-6 h-6"}}},1737:function(e,n,t){"use strict";t.d(n,{i:function(){return c}});var r=t(5893),a=t(7294),i=t(8080),s=t(1163),c=function(e){var n=e.children,t=e.uu;return(0,a.useEffect)((function(){t.loginState===i.z.LoggedOut&&s.default.push("/login")}),[t.loginState]),t.loginState===i.z.LoggingOut||t.loginState===i.z.LoggedOut?(0,r.jsx)("div",{className:"px-8 py-6",children:"Logging out..."}):t.loginState===i.z.LoggingIn?(0,r.jsx)("div",{className:"px-8 py-6",children:"Logging in..."}):(0,r.jsx)(r.Fragment,{children:n})}},2167:function(e,n,t){"use strict";var r=t(3848),a=t(9448);n.default=void 0;var i=a(t(7294)),s=t(9414),c=t(4651),o=t(7426),l={};function u(e,n,t,r){if(e&&(0,s.isLocalURL)(n)){e.prefetch(n,t,r).catch((function(e){0}));var a=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;l[n+"%"+t+(a?"%"+a:"")]=!0}}var d=function(e){var n,t=!1!==e.prefetch,a=(0,c.useRouter)(),d=i.default.useMemo((function(){var n=(0,s.resolveHref)(a,e.href,!0),t=r(n,2),i=t[0],c=t[1];return{href:i,as:e.as?(0,s.resolveHref)(a,e.as):c||i}}),[a,e.href,e.as]),m=d.href,f=d.as,h=e.children,x=e.replace,g=e.shallow,p=e.scroll,v=e.locale;"string"===typeof h&&(h=i.default.createElement("a",null,h));var w=(n=i.Children.only(h))&&"object"===typeof n&&n.ref,b=(0,o.useIntersection)({rootMargin:"200px"}),y=r(b,2),j=y[0],N=y[1],k=i.default.useCallback((function(e){j(e),w&&("function"===typeof w?w(e):"object"===typeof w&&(w.current=e))}),[w,j]);(0,i.useEffect)((function(){var e=N&&t&&(0,s.isLocalURL)(m),n="undefined"!==typeof v?v:a&&a.locale,r=l[m+"%"+f+(n?"%"+n:"")];e&&!r&&u(a,m,f,{locale:n})}),[f,m,N,v,t,a]);var C={ref:k,onClick:function(e){n.props&&"function"===typeof n.props.onClick&&n.props.onClick(e),e.defaultPrevented||function(e,n,t,r,a,i,c,o){("A"!==e.currentTarget.nodeName||!function(e){var n=e.currentTarget.target;return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,s.isLocalURL)(t))&&(e.preventDefault(),null==c&&r.indexOf("#")>=0&&(c=!1),n[a?"replace":"push"](t,r,{shallow:i,locale:o,scroll:c}))}(e,a,m,f,x,g,p,v)},onMouseEnter:function(e){(0,s.isLocalURL)(m)&&(n.props&&"function"===typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),u(a,m,f,{priority:!0}))}};if(e.passHref||"a"===n.type&&!("href"in n.props)){var L="undefined"!==typeof v?v:a&&a.locale,S=a&&a.isLocaleDomain&&(0,s.getDomainLocale)(f,L,a&&a.locales,a&&a.domainLocales);C.href=S||(0,s.addBasePath)((0,s.addLocale)(f,L,a&&a.defaultLocale))}return i.default.cloneElement(n,C)};n.default=d},7426:function(e,n,t){"use strict";var r=t(3848);n.__esModule=!0,n.useIntersection=function(e){var n=e.rootMargin,t=e.disabled||!s,o=(0,a.useRef)(),l=(0,a.useState)(!1),u=r(l,2),d=u[0],m=u[1],f=(0,a.useCallback)((function(e){o.current&&(o.current(),o.current=void 0),t||d||e&&e.tagName&&(o.current=function(e,n,t){var r=function(e){var n=e.rootMargin||"",t=c.get(n);if(t)return t;var r=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var n=r.get(e.target),t=e.isIntersecting||e.intersectionRatio>0;n&&t&&n(t)}))}),e);return c.set(n,t={id:n,observer:a,elements:r}),t}(t),a=r.id,i=r.observer,s=r.elements;return s.set(e,n),i.observe(e),function(){s.delete(e),i.unobserve(e),0===s.size&&(i.disconnect(),c.delete(a))}}(e,(function(e){return e&&m(e)}),{rootMargin:n}))}),[t,n,d]);return(0,a.useEffect)((function(){if(!s&&!d){var e=(0,i.requestIdleCallback)((function(){return m(!0)}));return function(){return(0,i.cancelIdleCallback)(e)}}}),[d]),[f,d]};var a=t(7294),i=t(3447),s="undefined"!==typeof IntersectionObserver;var c=new Map},8699:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r,a=t(809),i=t.n(a),s=t(5893),c=t(2447),o=t(9008),l=t(6131),u=t(5876),d=t(7294),m=t(8080),f=t(6049),h=t(3384),x=t(2224),g=t(8891),p=t(8212);!function(e){e[e.Admin=0]="Admin",e[e.Editor=1]="Editor",e[e.Viewer=2]="Viewer"}(r||(r={}));var v,w=function(e){var n=(0,d.useState)(e.initialUser.name),t=n[0],a=n[1],o=(0,d.useState)(e.initialUser.email),l=o[0],u=o[1],m=(0,d.useState)(""),f=m[0],v=m[1],w=(0,d.useState)((function(){return e.initialUser.isAdmin?r.Admin:e.initialUser.canEdit?r.Editor:r.Viewer})),b=w[0],y=w[1],j=(0,d.useState)(!1),N=j[0],k=j[1];function C(){return L.apply(this,arguments)}function L(){return(L=(0,c.Z)(i().mark((function n(){var a,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==t.trim()){n.next=3;break}return window.alert("You must enter a name"),n.abrupt("return");case 3:if(""!==l.trim()){n.next=6;break}return window.alert("You must enter an email"),n.abrupt("return");case 6:if(!e.isNewUser||""!==f.trim()){n.next=9;break}return window.alert("You must enter a password"),n.abrupt("return");case 9:if(k(!0),!e.isNewUser){n.next=21;break}return a={email:l.toLowerCase().trim(),name:t.trim(),password:f.trim(),isAdmin:b===r.Admin,canEdit:b!==r.Viewer},n.next=14,(0,x.W$)(a);case 14:if("success"===n.sent){n.next=19;break}return window.alert("Problem saving user"),k(!1),n.abrupt("return");case 19:n.next=29;break;case 21:return s={email:e.initialUser.email,name:t.trim(),isAdmin:b===r.Admin,canEdit:b!==r.Viewer},n.next=24,(0,x.Nq)(s);case 24:if("success"===n.sent){n.next=29;break}return window.alert("Problem saving user"),k(!1),n.abrupt("return");case 29:if(!e.refreshUsers){n.next=32;break}return n.next=32,e.refreshUsers();case 32:e.cancel();case 33:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function S(){return(S=(0,c.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("Are you sure?")){n.next=2;break}return n.abrupt("return");case 2:return k(!0),n.next=5,(0,x.h8)({email:e.initialUser.email});case 5:if("success"===n.sent){n.next=10;break}return window.alert("Problem deleting user"),k(!1),n.abrupt("return");case 10:if(!e.refreshUsers){n.next=13;break}return n.next=13,e.refreshUsers();case 13:e.cancel();case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,s.jsx)(p.u_,{cancel:e.cancel,minWidth:600,children:N?(0,s.jsx)("div",{className:"",children:"Saving..."}):(0,s.jsxs)(s.Fragment,{children:[!e.isNewUser&&(0,s.jsx)("div",{className:"mb-3 text-xl font-bold",children:e.initialUser.email}),(0,s.jsx)("div",{className:"ui-form-subheader",children:"Name"}),(0,s.jsx)(h.u3,{value:t,onChange:a,autoFocus:!0}),e.isNewUser&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mt-4 ui-form-subheader",children:"Email"}),(0,s.jsx)(h.u3,{type:h.o3.email,value:l,onChange:u}),(0,s.jsx)("div",{className:"mt-4 ui-form-subheader",children:"New password"}),(0,s.jsx)(h.u3,{type:h.o3.password,value:f,onChange:v})]}),(0,s.jsx)("div",{className:"py-1"}),(0,s.jsx)(h.mA,{rootId:"admin-privilege",checked:b===r.Admin,label:g.kK,onChange:function(){return y(r.Admin)},radio:!0}),(0,s.jsx)(h.mA,{rootId:"edit-privilege",checked:b===r.Editor,label:g.O7,onChange:function(){return y(r.Editor)},radio:!0}),(0,s.jsx)(h.mA,{rootId:"view-privilege",checked:b===r.Viewer,label:g.fb,onChange:function(){return y(r.Viewer)},radio:!0}),e.isNewUser?(0,s.jsxs)(p.nK,{children:[(0,s.jsx)(h.y3,{label:"Create new user",onClick:C,color:h.Wo.Green}),(0,s.jsx)(h.y3,{label:"Cancel",onClick:e.cancel,color:h.Wo.Gray,marginLeft:!0})]}):(0,s.jsxs)(p.nK,{children:[(0,s.jsx)(h.y3,{label:"Save",onClick:C,color:h.Wo.Blue}),(0,s.jsx)(h.y3,{label:"Cancel",onClick:e.cancel,color:h.Wo.Gray,marginLeft:!0}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(h.y3,{label:"Delete this user",onClick:function(){return S.apply(this,arguments)},color:h.Wo.Red,marginLeft:!0})]})]})})},b=t(2067),y=t(9669),j=t.n(y),N=t(9248);!function(e){e[e.Unknown=0]="Unknown",e[e.NotRunning=1]="NotRunning",e[e.RequestingStart=2]="RequestingStart",e[e.Running=3]="Running",e[e.RequestingStop=4]="RequestingStop",e[e.Error=5]="Error"}(v||(v={}));var k=function(e){var n=(0,d.useState)(v.Unknown),t=n[0],r=n[1];function a(){return o.apply(this,arguments)}function o(){return(o=(0,c.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j().get("".concat(N.i,"/info_scheduler"));case 3:(n=e.sent)&&void 0!==n.data&&r(n.data?v.Running:v.NotRunning),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(v.Error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function l(){return(l=(0,c.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(v.RequestingStart),e.prev=1,e.next=4,j().get("".concat(N.i,"/stop_scheduler"));case 4:return e.next=6,C(3e3);case 6:return e.next=8,j().get("".concat(N.i,"/start_scheduler"));case 8:a(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r(v.Error);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function u(){return(u=(0,c.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(v.RequestingStop),e.prev=1,e.next=4,j().get("".concat(N.i,"/stop_scheduler"));case 4:a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r(v.Error);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return(0,d.useEffect)((function(){a()}),[]),(0,s.jsxs)("div",{className:"px-6 py-4 mt-8 bg-white",children:[(0,s.jsx)("div",{className:"mb-2 text-base font-bold",children:"Scheduler"}),t===v.Unknown&&(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Loading scheduler..."}),t===v.NotRunning&&(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"mb-3 text-sm",children:'The scheduler runs automatically every night. You do not need to start or stop the scheduler yourself. However, if you want to trigger a special run of the scheduler now, you can do so below. This will run all of the analyses marked as "scheduled", in order. It will not pull new ODK files, it will only run the analyses.'}),(0,s.jsx)(h.y3,{label:"Start scheduler",onClick:function(){return l.apply(this,arguments)},color:h.Wo.Green})]}),t===v.RequestingStart&&(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Starting scheduler..."}),t===v.Running&&(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"mb-3 text-sm",children:'The scheduler is running. To monitor progress, go to the "Analyses" tab and click "Refresh analyses" to see when analyses have been run.'}),(0,s.jsx)(h.y3,{label:"Stop",onClick:function(){return u.apply(this,arguments)},color:h.Wo.Red})]}),t===v.RequestingStop&&(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Stopping scheduler..."}),t===v.Error&&(0,s.jsx)("div",{className:"",children:"Something went wrong with the scheduler. Refresh your browser and try again."})]})};function C(e){return new Promise((function(n){return setTimeout(n,e)}))}var L=function(e){var n=(0,d.useState)(!0),t=n[0],r=n[1],a=(0,d.useState)(void 0),x=a[0],g=a[1],p=(0,d.useState)(""),v=p[0],y=p[1],j=(0,d.useState)([]),N=j[0],C=j[1],L=e.uu.loginState===m.z.LoggedIn&&e.uu.user.isAdmin;function S(){return E.apply(this,arguments)}function E(){return(E=(0,c.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,(0,l.AW)();case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return");case 6:n.sort((function(e,n){return e.name.toLowerCase()<n.name.toLowerCase()?-1:1})),C(n),r(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.useEffect)((function(){S()}),[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.default,{children:[(0,s.jsx)("title",{children:"Analysis Portal"}),(0,s.jsx)("link",{rel:"stylesheet",type:"text/css",href:"/roboto.css"})]}),(0,s.jsxs)(u.L,{uu:e.uu,page:"admin",title:"Admin",buttons:[{label:"Refresh admin",onClick:S,icon:f.DuK,color:h.Wo.LightGray},{label:"New user",onClick:function(){return g("new")},icon:f.pOD}],children:[L?t?(0,s.jsx)("div",{className:"",children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("ul",{className:"px-6 py-2 overflow-hidden bg-white",children:[(0,s.jsx)("div",{className:"mt-2 mb-1 text-base font-bold",children:"Users"}),0===N.length&&(0,s.jsx)("div",{className:"py-2 text-sm leading-5",children:"No users"}),N.map((function(e,n){return(0,s.jsxs)("li",{className:"".concat(n>0?"border-t border-gray-200":""," py-2 grid grid-cols-12 gap-4 text-sm leading-5 select-text"),children:[(0,s.jsx)("div",{className:"col-span-3 truncate",children:e.name}),(0,s.jsx)("div",{className:"col-span-3 truncate",children:e.email}),(0,s.jsx)("div",{className:"col-span-3 truncate",children:e.isAdmin?"Administrator":e.canEdit?"Editor":"Viewer"}),(0,s.jsxs)("div",{className:"col-span-3 text-right truncate",children:[(0,s.jsx)("span",{className:"ui-link-gray",onClick:function(){return g(e)},children:"Edit user"}),(0,s.jsx)("span",{className:"ml-4 ui-link-gray",onClick:function(){return y(e.email)},children:"Change password"})]})]},e.email)}))]}),(0,s.jsx)(k,{})]}):(0,s.jsx)("div",{className:"",children:"Not authorized"}),x&&(0,s.jsx)(w,{cancel:function(){return g(void 0)},initialUser:"new"===x?{name:"",email:"",isAdmin:!1,canEdit:!1}:x,isNewUser:"new"===x,refreshUsers:S}),v&&(0,s.jsx)(b.u,{email:v,cancel:function(){return y("")},adminIsChangingPassword:!0})]})]})}},2347:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(8699)}])},1664:function(e,n,t){e.exports=t(2167)}},function(e){e.O(0,[231,774,888,179],(function(){return n=2347,e(e.s=n);var n}));var n=e.O();_N_E=n}]);